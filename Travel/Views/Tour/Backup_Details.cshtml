@{
    ViewData["Title"] = "Chi tiết Tour Đông Bắc 2025";
}

<div class="container">
    <div class="row g-4">
        <!-- Phần nội dung chính -->
        <div class="col-lg-8">
            <!-- Carousel hình ảnh -->
            <div id="tourCarousel" class="carousel slide shadow-lg" data-bs-ride="carousel">
                <div class="carousel-inner ratio ratio-21x9">
                    <div class="carousel-item active">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/B%E1%BA%A3n_Ph%C3%B9ng_-_NKS.jpg"
                             class="d-block w-100"
                             alt="Hà Giang mùa hè"
                             loading="lazy">
                    </div>
                    <div class="carousel-item">
                        <img src="/images/dalat.jpg"
                             class="d-block w-100"
                             alt="Thác Bản Giốc"
                             loading="lazy">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#tourCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Trước</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#tourCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Sau</span>
                </button>
            </div>

            <!-- Thông tin chính -->
            <div class="mt-4">
                <h1 class="mb-3">Du lịch Đông Bắc Hè 2025 - Hà Giang, Cao Bằng, Thác Bản Giốc</h1>
                <div class="row row-cols-1 row-cols-md-2 g-4">
                    <div class="col">
                        <div class="card h-100 border-0 bg-light">
                            <div class="card-body">
                                <h3><i class="bi bi-geo-alt-fill text-primary me-2"></i>Lộ trình</h3>
                                <ul>
                                    <li>Hà Nội - Hà Giang</li>
                                    <li>Cao Bằng - Thác Bản Giốc</li>
                                    <li>Lũng Cú - Đồng Văn</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card h-100 border-0 bg-light">
                            <div class="card-body">
                                <h3><i class="bi bi-check2-circle-fill text-success me-2"></i>Dịch vụ bao gồm</h3>
                                <ul>
                                    <li>Xe đưa đón đời mới</li>
                                    <li>Khách sạn 3-4 sao</li>
                                    <li>Bảo hiểm du lịch</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lịch trình chi tiết -->
            <section class="mt-5">
                <h2 class="mb-4">Lịch trình chi tiết</h2>
                <div class="accordion" id="scheduleAccordion">
                    <!-- Ngày 1 -->
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#day1">
                                Ngày 1: Hà Nội - Hà Giang
                            </button>
                        </h3>
                        <div id="day1" class="accordion-collapse collapse show" data-bs-parent="#scheduleAccordion">
                            <div class="accordion-body">
                                <p><strong>Sáng:</strong> Khởi hành từ Hà Nội...</p>
                                <img src="/images/nhatrang.jpg"
                                     class="img-fluid rounded-3 cursor-zoom"
                                     alt="Đường đến Hà Giang"
                                     data-bs-toggle="modal"
                                     data-bs-target="#imageModal"
                                     loading="lazy">
                            </div>
                        </div>
                    </div>

                    <!-- Ngày 2 -->
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#day2">
                                Ngày 2: Khám phá Hà Giang
                            </button>
                        </h3>
                        <div id="day2" class="accordion-collapse collapse" data-bs-parent="#scheduleAccordion">
                            <div class="accordion-body">
                                <p><strong>Chiều:</strong> Tham quan Cột cờ Lũng Cú...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Sidebar đặt tour -->
        <aside class="col-lg-4">
            <div class="sticky-top booking-box">
                <div class="card border-0 shadow-lg">
                    <div class="card-body">
                        <h2 class="h4 mb-3">Đặt tour ngay</h2>

                        <!-- Giá và khuyến mãi -->
                        <div class="mb-4">
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="text-muted">Giá gốc:</span>
                                <del class="text-muted">10,999,000đ</del>
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="text-muted">Khuyến mãi:</span>
                                <span class="text-danger fw-bold">-15%</span>
                            </div>
                            <hr>
                            <div class="h3 text-danger mb-0">9,399,000đ</div>
                            <small class="text-muted">/người</small>
                        </div>

                        <!-- Form đặt tour -->
                        <form>
                            <div class="mb-3">
                                <label class="form-label">Chọn ngày</label>
                                <input type="date" class="form-control"
                                       min="2025-04-01"
                                       value="2025-04-05">
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Số lượng</label>
                                <select class="form-select">
                                    <option>1 người</option>
                                    <option>2 người</option>
                                    <option>3-5 người</option>
                                </select>
                            </div>

                            <button class="btn btn-danger w-100 py-3">
                                <i class="bi bi-cart-check me-2"></i>ĐẶT TOUR NGAY
                            </button>
                        </form>

                        <!-- Chính sách -->
                        <div class="mt-4 small text-muted">
                            <p><i class="bi bi-check-circle me-2"></i>Hoàn hủy miễn phí trước 15 ngày</p>
                            <p><i class="bi bi-shield-check me-2"></i>Thanh toán an toàn</p>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>
</div>

<!-- Modal phóng to ảnh -->
<div class="modal fade" id="imageModal" tabindex="-1">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body text-center">
                <img src="/wwwroot/images/hero_bg.jpg" class="img-fluid" id="zoomedImage" alt="Ảnh phóng to">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Xử lý sticky sidebar
        window.addEventListener('scroll', function() {
            const sidebar = document.querySelector('.booking-box');
            if (!sidebar) return;

            const scrollPosition = window.scrollY;
            const startSticky = 300; // Bắt đầu sticky khi scroll qua 300px

            if (scrollPosition > startSticky) {
                sidebar.style.position = 'sticky';
                sidebar.style.top = '20px';
            } else {
                sidebar.style.position = 'static';
            }
        });

        // Xử lý phóng to ảnh
        document.querySelectorAll('.cursor-zoom').forEach(img => {
            img.addEventListener('click', () => {
                document.getElementById('zoomedImage').src = img.src;
            });
        });
    </script>
}

<style>
    .cursor-zoom {
        cursor: zoom-in;
        transition: transform 0.3s ease;
    }

        .cursor-zoom:hover {
            transform: scale(1.02);
        }

    .booking-box {
        top: 20px;
        z-index: 1000;
    }

    .accordion-button:not(.collapsed) {
        background-color: #f8f9fa;
    }
</style>